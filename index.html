<script>
    const totalPages = 24; // Total number of pages in the booklet
    let preloadedImages = [];

    // Preload all booklet images
    function preloadBookletImages() {
        for (let i = 1; i <= totalPages; i++) {
            const img = new Image();
            img.src = `Re-Viewing the Gaze Catalogue_Page_${String(i).padStart(2, '0')}.png`;
            preloadedImages.push(img);
        }
        console.log("All booklet images preloaded.");
    }

    function enterFullScreen() {
        const cover = document.getElementById('cover-container');
        const bookletContainer = document.getElementById('booklet-container');

        // Hide the cover and show the booklet
        cover.style.display = 'none';
        bookletContainer.style.display = 'flex';

        // Request full screen
        const elem = document.documentElement;
        if (!document.fullscreenElement) {
            elem.requestFullscreen().catch((err) => {
                console.error(`Error enabling full-screen mode: ${err.message}`);
            });
        }

        // Preload images before showing the booklet
        preloadBookletImages();

        // Display the first pages
        updatePages();
    }

    function updatePages() {
        const leftPage = document.getElementById('left-page');
        const rightPage = document.getElementById('right-page');
        const currentPageNumber = currentPage;

        if (currentPage === 1) {
            leftPage.src = `Re-Viewing the Gaze Catalogue_Page_01.png`;
            rightPage.style.visibility = 'hidden';
        } else if (isPortraitMode()) {
            leftPage.src = preloadedImages[currentPageNumber - 1].src;
            rightPage.style.visibility = 'hidden';
        } else {
            leftPage.src = preloadedImages[currentPageNumber - 1].src;
            if (currentPage < totalPages) {
                rightPage.src = preloadedImages[currentPageNumber].src;
                rightPage.style.visibility = 'visible';
            } else {
                rightPage.style.visibility = 'hidden';
            }
        }
    }
</script>
